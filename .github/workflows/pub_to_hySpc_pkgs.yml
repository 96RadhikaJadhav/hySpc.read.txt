name: pub_to_hySpc_pkgs
# Toggle to change deploy trigger
on: pull_request_review
# on: push

jobs:
  run:
    name: pub_to_hySpc_pkgs
    runs-on: ubuntu-latest
    steps:

    - name: Clone_Move_Checkout_Add_&_Commit
      run: |
        git clone https://github.com/r-hyperspec/hySpc.pkgs.git
        mkdir archive
        mv hySpc.pkgs archive
        cd archive/hySpc.pkgs
        echo This file was generated from r-hyperspec/hySpc.read.Witec > test.txt
        mv test.txt src/contrib
        cd src/contrib
        git config --global user.email "eeoduniyi@gmail.com"
        git config --global user.name "eoduniyi"
        git add -A
        git commit -m "Automatic publish from hySpc.read.Witec"
      env:
        REPO_KEY: ${{ secrets.HYSPC_EO_TOKEN }}
        USERNAME: r-hyperspec
    - name: Push
      uses: ad-m/github-push-action@master
      with:
        repository: 'r-hyperspec/hySpc.pkgs'
        directory: './archive/hySpc.pkgs'
        github_token: ${{ secrets.HYSPC_EO_TOKEN }}
